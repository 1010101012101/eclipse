<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=Content-Type content="text/html; charset=windows-1252">
<META content="Microsoft FrontPage 6.0" name=GENERATOR></HEAD>
<BODY>
<H1>Shared Eclipse Welcome</H1>
<H2>Background</H2>
<P>This document represents a description of a new welcome 
implementation that will be used by Eclipse products that want to promote contributions 
into the Welcome pages. The implementation will be provided by Eclipse platform 
and available for use and configuration.</P>
<H2>The Problem</H2>
<P>The Welcome framework in Eclipse provides for defining welcome pages with 
unique contribution points or 'anchors'. Other components can provide extensions 
that add content into these anchors. Although this mechanism worked well for 
closed solutions, it is increasingly hard to maintain for large products. Due to 
the 'bottom-up' nature of contributions from clients into the welcome pages, it 
is hard to control the final result and resolve conflicting contributions.</P>
<P>Take a provider of a reusable Eclipse feature as an example. He/she has 
created a useful feature consisting of a number of plug-ins. The feature can 
take part in several products, each one having its own Welcome implementation. 
There are several problems that the feature provider will face when creating 
Welcome contribution:</P>
<UL>
  <LI>Since it must contribute into a number of different products, the feature 
  must know about the page identifiers for each of the products upfront. 
  <LI>It is entirely possible that one of the products will have a Welcome 
  implementation that is completely different from what the feature provider 
  expects; the contribution will not show up in these products 
  <LI>Even if the products share a common Welcome implementation, the importance 
  of the feature (and hence its relative position on the page) is not going to 
  be the same. The feature can be one of the most important components in the 
  product, or may be ranked as 'See Also'. Nevertheless, the feature provider is 
  asked to fully spell out the location on the target page in advance. </LI></UL>
<P>It is clearly obvious that the Welcome contribution of a reusable feature 
would be much easier to develop with the following conditions in place:</P>
<UL>
  <LI>Common Welcome implementation that can be counted on (as a form of an API) 
  <LI>Delayed target page resolution (so that the decision of the final position 
  of the contribution is left to the product assemblers)</LI></UL>
<H2>The Solution</H2>
<P>Based on the conclusions made in the previous section, the User Assistance 
team now provides a recommended Welcome implementation that will be used by all products that want 
to support better Welcome control. Eclipse Platform and SDK products will switch 
to this implementation and others will be encouraged to follow suit.</P>
<P>The shared Welcome solution is based on our experience with Welcome 
implementations and the need to have an implementation in place that 
contributors can count on. The implementation is built using the current Welcome 
framework which has been minimally enhanced to better support it. For this 
reason, all existing Welcome implementation will continue to work and clients 
will be able to switch to the new shared model according to their schedules. Of course, as 
long as they don't switch, they will not reap benefits of the new 
implementation such as intelligent content merging, new visual solution etc.</P>
<h3>Design Principles</h3>
<P>While designing the shared welcome implementation, we started from the 
following principles:</P>
<ol>
	<li>Products should be able to point at the shared implementation without 
	the need to implement Welcome from scratch</li>
	<li>Each product should be able to configure the shared implementation to a 
	certain degree (root page background, title, branding image)</li>
	<li>A number of root pages that cover most of the products' needs will be 
	provided by the shared implementation. However, the pages to show and their 
	order should be under individual product's control</li>
	<li>Visual design of the shared Welcome implementation should be 
	sufficiently product-agnostic to better suit the increasingly componentized 
	world. It should work well with both monolithic products and 'best of bread' 
	Eclipse products composed of components created by different companies.</li>
</ol>
<H3>Hooking to the shared Welcome implementation</H3>
<p>In order to hook to the shared Welcome, developers should have a 
product-based Eclipse application. This requires the use of the <b>
org.eclipse.runtime.products</b> extension point (the assumption is that the 
product has already been defined):</p>
<blockquote>
	<pre>&lt;extension
	id=&quot;foo&quot;
	point=&quot;org.eclipse.core.runtime.products&quot;&gt;
   &lt;product
      application=&quot;org.eclipse.ui.ide.workbench&quot;
      description=&quot;Product Foo to use for testing the shared intro&quot;
      name=&quot;Product Foo&quot;&gt;
   &lt;/product&gt;
&lt;/extension&gt;</pre>
</blockquote>
<p>For this example, assume that the extension is define in plugin.xml file 
sitting in the bundle with the bundle id of <b>com.example.intro</b>. A 
long-existing feature of the Eclipse intro support is the ability to hook 
products and intros using the product-intro binding:</p>
<blockquote>
	<pre>&lt;extension
	point=&quot;org.eclipse.ui.intro&quot;&gt;
   &lt;introProductBinding
      introId=&quot;org.eclipse.ui.intro.shared&quot;
      productId=&quot;com.example.intro.foo&quot;/&gt;
&lt;/extension&gt;</pre>
</blockquote>
<p>The extension above binds the shared intro implementation (<b>org.eclipse.ui.intro.shared</b>) 
and our product id. Note however that the shared intro can be configured in 
several ways, and the configuration starts by using the product properties:</p>
<pre>      &lt;product
            application=&quot;org.eclipse.ui.ide.workbench&quot;
            description=&quot;Product Foo to use for testing the shared intro&quot;
            name=&quot;Product Foo&quot;&gt;
         &lt;property
               name=&quot;introData&quot;
               value=&quot;bundle:intro_data.xml&quot;/&gt;
         &lt;property
               name=&quot;introTitle&quot;
               value=&quot;Welcome to Product Bar&quot;/&gt;
         &lt;property
               name=&quot;introBackgroundImage&quot;
               value=&quot;bundle:welcomebckgrd.jpg&quot;/&gt;
         &lt;property
               name=&quot;introBrandingImage&quot;
               value=&quot;bundle:eclipse.png&quot;/&gt;
         &lt;property
       	       name=&quot;introBrandingText&quot;
               value=&quot;XYZ Company&quot;/&gt;
         &lt;property
               name=&quot;introRootPages&quot;
               value=&quot;overview,firststeps,tutorials,samples,whatsnew,migrate,webresources&quot;/&gt;
      &lt;/product&gt;</pre>
<p>Product properties whose values represent a file name relative to the product 
bundle must be qualified with the 'bundle:' prefix. The following properties are 
supported:</p>
<ul>
	<li><b>introTitle</b> - the value of the property will be used at the top of 
	the root page</li>
	<li><b>introBackgroundImage</b> - the value of the property represents the 
	file name of the image to use as the root page background. The background 
	image should be of sufficient size to prevent tiling (suggested size 
	1600x1200).</li>
	<li><b>introBrandingImage</b> - the value of the property represents the 
	file name of the image to be used as the root page brandmark. The image 
	should ideally be PNG with alpha blending but other formats are also valid.</li>
	<li><b>introBrandingText</b> - the alternative text to be used for the 
	branding image.</li>
	<li><b>introRootPages</b> - a comma-separated list indicating page links 
	that should show up on the root page, as well as their order. The tokens in 
	the list can be one of:<ul>
		<li><b>overview</b></li>
		<li><b>firststeps</b></li>
		<li><b>tutorials</b></li>
		<li><b>samples</b></li>
		<li><b>whatsnew</b></li>
		<li><b>migrate</b></li>
		<li><b>webresources</b></li>
	</ul>
	</li>
	<li><b>introData</b> - the name of the XML file containing additional 
	configuring information (see further down).</li>
</ul>
<H3>Extending the shared Welcome</H3>
<p>When launching the shared Welcome configured as shown above, you will notice 
that all of the second level page that branch off the root page have an empty 
content area. This is because shared Welcome does not have content of its own. 
These areas are populated using intro config extensions.</p>
<p>The traditional way of contributing config extensions is to specify a full 
path of the anchor element in the target page. This method is still supported 
but it has proven to be somewhat fragile. As mentioned before, specifying an 
exact place where the extension will end up in the target is premature for 
extension authors. They may not know all the products in which their extension 
will end up, and therefore don't know where they should appear according to each 
product's focus. In the shared Welcome, this decision is left to product 
authors. Extension authors now have the option of specifying an incomplete 
target path, allowing the product author to fill in the blanks.</p>
<p>Config extensions that want to use late target path resolution need to 
fulfill two conditions:</p>
<ol>
	<li>Config extension needs to specify a unique identifier using the 'id' 
	attribute. Extensions without the id will be ignored. This is important 
	because id will be used to refer to the extenstion by the product author.</li>
	<li>The target path should have the following form: &quot;page_id/@&quot; where 'page_id' 
	is the identifier of the target page. When '/@' is detected in the target 
	path, an attempt will be made to dynamically resolve the path into the 
	expected full form.</li>
</ol>
<P>The ability to resolve extension target paths is a new intro support feature 
in Eclipse 3.2 added to make shared Welcome more powerful. The feature itself is 
generic in that it can be used in other Welcome implementations, not just the 
shared one. In Eclipse 3.2, CustomizableIntroPart can accept an optional intro 
customizer class that can affect its behavior in several ways. One of the roles 
of the customizer is to perform late target path resolution. Of course, as far 
as product authors are concerned, this is all just implementation detail because 
in shared Welcome implementation, late target path resolution is performed using 
the data file mentioned earlier. This file is specified in the product extension 
using the 'introData' property.</P>
<P>The 'introData' file uses XML format and allows product authors to control 
the content of the main Welcome pages. Welcome contribution authors are required 
to specify only the page Id in their target paths. The rest is defined in this 
file. The file contains a sequence of 'page' elements, each containing a number 
of 'group' elements. Group elements specify page-relative path and have 
contributions for children. Contribution elements are used to specify two 
aspects:&nbsp; </P>
<BLOCKQUOTE><PRE>&lt;extensions&gt;
   &lt;page id="overview"&gt;
      &lt;group path="page-content/left"&gt;
          &lt;extension id="foo1" importance=&quot;high&quot;/&gt;
          &lt;extension id="bar"  importance=&quot;high&quot;/&gt;
	  &lt;extension id=&quot;foo2&quot; importance=&quot;medium&quot;/&gt;
      &lt;/group&gt;
      &lt;group path="page-content/right"&gt;
           &lt;extension id="foo3" importance=&quot;low&quot;/&gt;
           &lt;extension id="foo4" importance=&quot;low&quot;/&gt;
           &lt;extension id=&quot;foo5&quot; importance=&quot;callout&quot;/&gt;
      &lt;/group&gt;
      &lt;hidden&gt;
            &lt;extension id="foo6"/&gt;
            &lt;extension id="foo7"/&gt;
      &lt;/hidden&gt;
   &lt;/page&gt;
   &lt;page id="whatsnew"&gt;
       ...
   &lt;/page&gt;
&lt;/extensions&gt;</PRE></BLOCKQUOTE>
<p>In the example above, contributions 'foo1', 'bar' and foo2' will be in the 
left, and 'foo3', 'foo4' and 'foo5' in the right column on the page. The 
relative order of contributions is also extracted from this file. In addition, 
contributions are classified based on the <code>importance</code> attribute that 
can have four valid values: <b>high</b>, <b>medium</b>, <b>low</b> and <b>
callout</b>, with <b>low</b> as the default. Each value has matching 
presentation that makes it stand out on the page. First three are simply 
different levels of importance according to the product author (note that the 
same contribution may receive a different importance classification in two 
separate products). The last one (<b>callout</b>) is used to single out 
contributions that are of a completely different nature (for example, a 
contribution that offers links to videos or animation).</p>
<p>Contributions that are not listed are appended after the listed contributions 
and assigned a low importance value. This is important for contributions added 
after the product has shipped - they still need to show up.</p>
<p>Contributions not relevant to the project can be hidden by explicitly listing 
them as children of the 'hidden' element.</p>
<H3>Seeding the introData file</H3>
<p>One of the difficulties with the intro data file is that it is time consuming 
to find all the intro extensions available in the product. For this reason, we 
have provided a utility application that writes the initial file you can use as 
a starting point. The utility application's id is <b>
org.eclipse.ui.intro.introData.</b> Start Eclipse with all the plug-ins that 
comprise your product by passing this application (either as a command line 
argument or by selecting it from PDE's launch configuration) and the application 
will write the content of the file to the console. Copy the content of the 
console and paste it into the file that <b>introData</b> property in your 
product extension is pointing at.</p>
<H3>Handling multiple products</H3>
<p>The intent of the shared Welcome implementation is that all products that 
want intelligent content merging point at it instead of creating their own. This 
implies that it is possible to end up in a situation where multiple products all 
pointing at the same shared Welcome coexist in the Eclipse workbench. Intro is 
handling this situation as follows:</p>
<ul>
	<li>Individual introData files associated with products in the workbench 
	will all be honored. </li>
	<li>Content from multiple products will be merged in the main Welcome pages.</li>
	<li>The extensions that belong to the currently active product will be given 
	precedance. For example, when there are two products 'Bar' and 'Foo', and 
	workbench has been launched with 'Bar' being the active product, 'Bar's 
	extensions will show up before 'Foo's extension <b>within the same 
	importance level</b>. This means that although Bar's extensions are shown 
	before Foo's, Foo's extensions of <b>high</b> importance will be positioned 
	before Bar's <b>medium</b> or <b>low</b> importance items.</li>
	<li>Other intro properties passed from the product extension point 
	(background, title, branding image) will be taken from the active product 
	only.</li>
</ul>
<H3>Following links from the main Welcome pages</H3>
<p>Most of the extensions coming into the main Welcome pages offer links to open 
further pages contributed by the extensions themselves. It is recommended to 
create these pages in such a way as to continue with the shared Welcome visual 
design. The main requirement is to show the appropriate navigator at the top of 
the page.</p>
<p>It is fairly easy to do that using the 'include' element. The idea is to 
include the navigation content at the beginning of contributed page. Unlike the 
current Welcome implementation, shared Welcome main pages have navigation 
section that is different for each page. For this reason, pages that branch off 
these pages should include the navigation from the parent page. For example:</p>
<blockquote>
	<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
&lt;introContent&gt;
   &lt;extensionContent id=&quot;extra&quot; alt-style=&quot;css/swt.properties&quot; style=&quot;css/overview.css&quot; path=&quot;overview/@&quot;&gt;
      &lt;link label=&quot;Extra Overview link&quot; url=&quot;<a href="http://org.eclipse.ui.intro/showPage?id=extraOverview">http://org.eclipse.ui.intro/showPage?id=extraOverview</a>&quot; 
					  id=&quot;extra-overview&quot;&gt;
      		&lt;text&gt;Showing the third-level extra page for overview&lt;/text&gt;
      &lt;/link&gt;
   &lt;/extensionContent&gt;
   &lt;page id=&quot;extraOverview&quot; style-id=&quot;page&quot;&gt;
      <b>&lt;include path=&quot;overview/navigation-links&quot;/&gt;</b>
      &lt;group id=&quot;page-content&quot;&gt;
            &lt;group id=&quot;content-header&quot; label=&quot;EXTRA OVERVIEW&quot; filteredFrom=&quot;swt&quot;&gt;
            &lt;/group&gt;
            &lt;text style-id=&quot;page-title&quot; id=&quot;page-title&quot; filteredFrom=&quot;html&quot;&gt;EXTRA OVERVIEW&lt;/text&gt;
            &lt;text style-id=&quot;page-description&quot; id=&quot;page-description&quot;&gt;Extra overview page description.&lt;/text&gt;
      &lt;/group&gt;
   &lt;/page&gt;
&lt;/introContent&gt;</pre>
</blockquote>
<p>The extension above contributed into the overview page contributes a link 
that shows another page whose definition is part of the extension. Note how we 
include the group 'navigation-links' that belongs to the 'overview' page at the 
beginning of the page content definition.</p>
<H3>Standard Welcome Presentation</H3>
<P>[We need to define how CSSs will be applied to control the look of the 
high/mid/low sections and overall Welcome]</P>
<P>[We also need to talk about how items in 'high importance' section may 
require larger icons]</P>
<H3>SWT fallback presentation</H3>
<P>[Need to talk a bit about the SWT fallback implementation for platforms that 
do not support embedded Web browser; this already exists but will have to be 
enhanced to support the high/med/low sections; it is possible that no changes 
will be needed]</P></BODY></HTML>
